#!/bin/sh

SEP=
SEPE=

CLOCK=
CALENDAR=☼
MUSIC=♫
BATTERY_ICON=

WIDTH=${1}

SMALL=80
MEDIUM=140

if [ "$WIDTH" -gt "$MEDIUM" ]; then
  MPD="#[fg=colour252,bg=default,nobold,noitalics,nounderscore]$SEP#[fg=colour234,bg=colour252,bold,noitalics,nounderscore] $MUSIC #{spotify_status} #{spotify_artist}: #{spotify_track}"
  date_colour='colour252'
fi

if [ "$WIDTH" -ge "$SMALL" ]; then
  UNAME="#[fg=colour241,bg=colour236,nobold,noitalics,nounderscore]$SEPE#[fg=colour39,bg=colour236,bold,noitalics,nounderscore] $(uname -n)"
fi

DATE="#[fg=colour236,bg=${date_colour:-default},nobold,noitalics,nounderscore]$SEP#[fg=colour247,bg=colour236,nobold,noitalics,nounderscore] $CALENDAR $(date +'%D')"
TIME="#[fg=colour241,bg=colour236,nobold,noitalics,nounderscore]$SEPE#[fg=colour252,bg=colour236,bold,noitalics,nounderscore] $CLOCK  $(date +'%H:%M')"
BATTERY="#[fg=colour241,bg=colour236,nobold,noitalics,nounderscore]$SEPE#[fg=colour252,bg=colour236,nobold,noitalics,nounderscore] $BATTERY_ICON #{battery_percentage}%"

echo "$MPD $DATE $TIME $BATTERY $UNAME " | sed 's/ *$/ /g'
